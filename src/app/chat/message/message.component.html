<!-- <div *ngIf="isOutgoingMessage; else outGoingMessage">
  <div class="incoming_msg">
    <div class="incoming_msg_img"> <img src="https://ptetutorials.com/images/user-profile.png"> </div>
    <div class="received_msg">
      <div class="received_width_msg">
        <span class="time_date"> {{message.sender}}</span>
        <p>{{message.content}}</p>
        <span class="time_date"> {{message.createdAt}}</span>
      </div>
    </div>
  </div>
</div>
<ng-template #outGoingMessage>
    <div class="outgoing_msg">
      <div class="sent_msg">
        <span class="time_date"> {{message.sender}}</span>
        <p>{{message.content}}</p>
        <span class="time_date"> {{message.createdAt}}</span>
      </div>
    </div>
</ng-template> -->

<div *ngIf="isOutgoingMessage; else outGoingMessage">
  <div class="message received" (click)="toggleMenu(message.id)">
    <div class="bubble-wrapper">
<div *ngIf="message.isReply" class="reply-bubble">
      {{message.replyContent}}
    </div>
    <div class="message-content">
      {{message.content}}
    </div>
    <div *ngIf="message.emoji" class="message-emoji">
    {{message.emoji}}
    </div>

    </div>
    <div class="message-time">{{message.createdAt}}</div>
    <div class="message-menu" *ngIf="activeMenuId === message.id">
      <button class="menu-btn" (click)="openEmojiMenu(message.id); $event.stopPropagation()">
        <i class="fas fa-smile"></i>
      </button>
      <button class="menu-btn" (click)="replyMessage(); $event.stopPropagation()">
        <i class="fas fa-reply"></i>
      </button>
      <button class="menu-btn" (click)="editMessage(); $event.stopPropagation()">
        <i class="fas fa-pencil-alt"></i>
      </button>
      <button class="menu-btn" (click)="deleteMessage(); $event.stopPropagation()">
        <i class="fas fa-trash"></i>
      </button>
    </div>
    <div class="emoji-dropdown" *ngIf="activeEmojiMenuId === message.id">
      <span (click)="selectEmoji('❤️'); $event.stopPropagation()">❤️</span>
      <span (click)="selectEmoji('😆'); $event.stopPropagation()">😆</span>
      <span (click)="selectEmoji('😮'); $event.stopPropagation()">😮</span>
      <span (click)="selectEmoji('😢'); $event.stopPropagation()">😢</span>
      <span (click)="selectEmoji('😡'); $event.stopPropagation()">😡</span>
      <span (click)="selectEmoji('👍'); $event.stopPropagation()">👍</span>
      <span (click)="selectEmoji(null); $event.stopPropagation()">🚫</span>
      <!-- ... -->
    </div>
  </div>
</div>
<ng-template #outGoingMessage>
  <div class="message sent" (click)="toggleMenu(message.id)">
    <div *ngIf="message.isReply" class="reply-bubble">
      {{message.replyContent}}
    </div>
    <div class="message-content">
      {{message.content}}
    </div>
     <div *ngIf="message.emoji" class="message-emoji">
    {{message.emoji}}
    </div>
    <div class="message-time">{{message.createdAt}} <i class="fas fa-check"></i></div>
    <div class="message-menu" *ngIf="activeMenuId === message.id">
      <button class="menu-btn" (click)="openEmojiMenu(message.id); $event.stopPropagation()">
        <i class="fas fa-smile"></i>
      </button>
      <button class="menu-btn" (click)="replyMessage(); $event.stopPropagation()">
        <i class="fas fa-reply"></i>
      </button>
      <button class="menu-btn" (click)="editMessage(); $event.stopPropagation()">
        <i class="fas fa-pencil-alt"></i>
      </button>
      <button class="menu-btn" (click)="deleteMessage(); $event.stopPropagation()">
        <i class="fas fa-trash"></i>
      </button>
    </div>
    <div class="emoji-dropdown" *ngIf="activeEmojiMenuId === message.id">
      <span (click)="selectEmoji('❤️'); $event.stopPropagation()">❤️</span>
      <span (click)="selectEmoji('😆'); $event.stopPropagation()">😆</span>
      <span (click)="selectEmoji('😮'); $event.stopPropagation()">😮</span>
      <span (click)="selectEmoji('😢'); $event.stopPropagation()">😢</span>
      <span (click)="selectEmoji('😡'); $event.stopPropagation()">😡</span>
      <span (click)="selectEmoji('👍'); $event.stopPropagation()">👍</span>
      <span (click)="selectEmoji(null); $event.stopPropagation()">🚫</span>
      <!-- ... -->
    </div>
  </div>
</ng-template>